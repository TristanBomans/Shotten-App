"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[412],{8530:function(e,t,a){a.d(t,{C:function(){return n}});let n=""},3412:function(e,t,a){a.d(t,{tj:function(){return h},zZ:function(){return y},SW:function(){return m},bh:function(){return I},Vk:function(){return p},NI:function(){return f},dO:function(){return d},cc:function(){return u},vw:function(){return C},SN:function(){return P},Oz:function(){return b},wR:function(){return w},ii:function(){return S}});var n=a(2265);let r=[{id:1,name:"Shotten FC"},{id:2,name:"Zaalvoetbal Zondag"}],s=[{id:1,name:"Tristan Bomans",teamIds:[1,2]},{id:2,name:"Daan de Vries",teamIds:[1]},{id:3,name:"Sem Bakker",teamIds:[1]},{id:4,name:"Lucas Jansen",teamIds:[1,2]},{id:5,name:"Finn Visser",teamIds:[1]},{id:6,name:"Jesse Smit",teamIds:[1]},{id:7,name:"Tim Mulder",teamIds:[1,2]},{id:8,name:"Bram Bos",teamIds:[1]},{id:9,name:"Thijs Dekker",teamIds:[1]},{id:10,name:"Ruben Peters",teamIds:[1,2]},{id:11,name:"Milan Hendriks",teamIds:[2]},{id:12,name:"Stijn Koning",teamIds:[2]}],o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new Date;return n.setDate(n.getDate()+e),n.setHours(t,a,0,0),n.toISOString()},i=[{id:101,name:"Shotten FC - De Zwaluwen",date:o(3,20,30),location:"Sporthal De Wielewaal, Rotterdam",teamId:1,attendances:[{playerId:1,status:"Present"},{playerId:2,status:"Present"},{playerId:3,status:"Maybe"},{playerId:5,status:"Present"},{playerId:6,status:"NotPresent"},{playerId:8,status:"Present"}]},{id:102,name:"FC Eindhoven - Shotten FC",date:o(10,19,0),location:"Indoor Arena Eindhoven",teamId:1,attendances:[{playerId:1,status:"Present"},{playerId:4,status:"Maybe"},{playerId:7,status:"Present"}]},{id:103,name:"Shotten FC - Sportclub West",date:o(17,21,0),location:"Sporthal De Wielewaal, Rotterdam",teamId:1,attendances:[{playerId:2,status:"Present"}]},{id:104,name:"Training Session",date:o(5,18,30),location:"Sporthal Zuid",teamId:1,attendances:[{playerId:1,status:"Present"},{playerId:3,status:"Present"},{playerId:5,status:"Present"},{playerId:6,status:"Maybe"},{playerId:9,status:"Present"},{playerId:10,status:"Present"}]},{id:105,name:"Zaalvoetbal - Open Avond",date:o(7,20,0),location:"Sportcentrum Noord, Amsterdam",teamId:2,attendances:[{playerId:1,status:"Present"},{playerId:4,status:"Present"},{playerId:11,status:"Present"},{playerId:12,status:"Maybe"}]},{id:201,name:"Ajax Zaal - Shotten FC",date:o(-7,20,0),location:"Johan Cruijff Arena (Zaal)",teamId:1,attendances:[{playerId:1,status:"Present"},{playerId:2,status:"Present"},{playerId:3,status:"Present"},{playerId:4,status:"Present"},{playerId:5,status:"NotPresent"},{playerId:6,status:"Present"},{playerId:7,status:"Present"},{playerId:8,status:"Present"},{playerId:9,status:"NotPresent"},{playerId:10,status:"Present"}]},{id:202,name:"Shotten FC - PSV Futsal",date:o(-14,19,30),location:"Sporthal De Wielewaal, Rotterdam",teamId:1,attendances:[{playerId:1,status:"Present"},{playerId:2,status:"NotPresent"},{playerId:3,status:"Present"},{playerId:6,status:"Present"},{playerId:7,status:"Present"},{playerId:8,status:"Present"}]},{id:203,name:"Vrienden Toernooi",date:o(-21,14,0),location:"Sportpark Oost",teamId:2,attendances:[{playerId:1,status:"Present"},{playerId:4,status:"Present"},{playerId:7,status:"NotPresent"},{playerId:10,status:"Present"},{playerId:11,status:"Present"},{playerId:12,status:"Present"}]}];function l(e){let t=s.find(t=>t.id===e);return t?i.filter(e=>t.teamIds.includes(e.teamId)).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()):[]}var c=a(8530);let d=()=>{let e=localStorage.getItem("useMockData");return null!==e&&"true"===e},u=e=>{localStorage.setItem("useMockData",String(e))};async function m(){let e=await fetch("".concat(c.C,"/api/lzv/stats"));if(!e.ok)throw Error("Failed to fetch scraper stats");return e.json()}async function y(){let e=await fetch("".concat(c.C,"/api/lzv/players"));if(!e.ok)throw Error("Failed to fetch scraper players");return e.json()}async function p(e){let t=await fetch("".concat(c.C,"/api/lzv/players?teamId=").concat(e));return t.ok?t.json():[]}async function f(e){let t=await m(),a=e.toLowerCase().trim();return t.find(e=>e.name.toLowerCase().includes(a)||a.includes(e.name.toLowerCase()))||null}async function h(){if(d())return await new Promise(e=>setTimeout(e,300)),[...s].sort((e,t)=>e.name.localeCompare(t.name));let e=await fetch("".concat(c.C,"/api/Players"));if(!e.ok)throw Error("Failed to fetch players");return(await e.json()).sort((e,t)=>e.name.localeCompare(t.name))}async function I(e){if(d())return await new Promise(e=>setTimeout(e,400)),l(e);let t=await fetch("".concat(c.C,"/api/Matches?playerId=").concat(e));if(!t.ok)throw Error("Failed to fetch matches");let a=await t.json();return a.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),a}function w(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0),[o,i]=(0,n.useState)(null);return{players:e,loading:a,error:o,fetchPlayers:(0,n.useCallback)(async()=>{r(!0),i(null);try{if(d())await new Promise(e=>setTimeout(e,300)),t([...s].sort((e,t)=>e.name.localeCompare(t.name)));else{let e=await fetch("".concat(c.C,"/api/Players"));if(!e.ok)throw Error("Failed to fetch players");let a=await e.json();t(a.sort((e,t)=>e.name.localeCompare(t.name)))}}catch(e){i(e instanceof Error?e.message:"Unknown error")}finally{r(!1)}},[])}}function P(e){let[t,a]=(0,n.useState)([]),[r,s]=(0,n.useState)(!0),[o,i]=(0,n.useState)(null);return{matches:t,loading:r,error:o,fetchMatches:(0,n.useCallback)(async()=>{if(!e){a([]),s(!1);return}s(!0),i(null);try{if(d())await new Promise(e=>setTimeout(e,400)),a(l(e));else{let t=await fetch("".concat(c.C,"/api/Matches?playerId=").concat(e));if(!t.ok)throw Error("Failed to fetch matches");let n=await t.json();n.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),a(n)}}catch(e){i(e instanceof Error?e.message:"Unknown error")}finally{s(!1)}},[e]),setMatches:a}}function C(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0);return{players:e,loading:a,fetchAllPlayers:(0,n.useCallback)(async()=>{r(!0);try{if(d())await new Promise(e=>setTimeout(e,200)),t(s);else{let e=await fetch("".concat(c.C,"/api/Players"));if(!e.ok)throw Error("Failed to fetch players");t(await e.json())}}catch(e){t([])}finally{r(!1)}},[])}}function S(){let[e,t]=(0,n.useState)(null);return{updating:e,updateAttendance:(0,n.useCallback)(async(e,a,n,r)=>{t(n);try{if(d()){await new Promise(e=>setTimeout(e,300));let t=i.find(t=>t.id===e);if(t){let e=t.attendances.findIndex(e=>e.playerId===a);e>=0?t.attendances[e].status=n:t.attendances.push({playerId:a,status:n})}}else if(!(await fetch("".concat(c.C,"/api/matches/").concat(e,"/players/").concat(a,"/attendance?status=").concat(n),{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update attendance");null==r||r()}catch(e){throw console.error("Failed to update attendance:",e),e}finally{t(null)}},[])}}async function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(d()){await new Promise(e=>setTimeout(e,300));let a={id:Math.max(...s.map(e=>e.id),0)+1,name:e,teamIds:t};return s.push(a),a}let a=await fetch("".concat(c.C,"/api/Players"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,teamIds:t})});if(!a.ok)throw Error("Failed to create player");return a.json()}async function T(e,t){if(d()){await new Promise(e=>setTimeout(e,300));let a=s.find(t=>t.id===e);if(!a)throw Error("Player not found");return a.name=t.name,a.teamIds=t.teamIds,a}let a=await fetch("".concat(c.C,"/api/Players/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to update player");return a.json()}async function g(e){if(d()){await new Promise(e=>setTimeout(e,300));let t=s.findIndex(t=>t.id===e);t>=0&&s.splice(t,1);return}if(!(await fetch("".concat(c.C,"/api/Players/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete player")}function b(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[u,m]=(0,n.useState)(!1),y=(0,n.useCallback)(async()=>{l(!0);try{let[e,a]=await Promise.all([d()?Promise.resolve(s):fetch("".concat(c.C,"/api/Players")).then(e=>e.json()),d()?Promise.resolve(r):fetch("".concat(c.C,"/api/Teams")).then(e=>e.json())]);t(e.sort((e,t)=>e.name.localeCompare(t.name))),o(a)}catch(e){console.error("Failed to load player management data:",e)}finally{l(!1)}},[]),p=(0,n.useCallback)(async e=>{m(!0);try{await k(e,[]),await y()}finally{m(!1)}},[y]),f=(0,n.useCallback)(async(e,t,a)=>{m(!0);try{await T(e,{name:t,teamIds:a}),await y()}finally{m(!1)}},[y]),h=(0,n.useCallback)(async e=>{m(!0);try{await g(e),await y()}finally{m(!1)}},[y]),I=(0,n.useCallback)(async(e,t)=>{let a=e.teamIds.includes(t)?e.teamIds.filter(e=>e!==t):[...e.teamIds,t];await f(e.id,e.name,a)},[f]);return{players:e,teams:a,loading:i,saving:u,refresh:y,addPlayer:p,editPlayer:f,removePlayer:h,toggleTeam:I}}}}]);